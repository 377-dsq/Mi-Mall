(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e54e2c1"],{1255:function(e,t,i){"use strict";var s=i("7634"),r=i.n(s);r.a},"1e8a":function(e,t,i){},"2c69":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"confirm"},[i("order-header",{attrs:{title:"订单确认"}},[i("template",{slot:"tip"},[i("span",[e._v("请确认收货地址")])])],2),i("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("defs",[i("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[i("title",[e._v("add")]),i("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),i("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[i("title",[e._v("edit")]),i("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),i("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[i("title",[e._v("delete")]),i("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),i("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),i("div",{staticClass:"container"},[i("div",{staticClass:"address"},[i("div",{staticClass:"title"},[e._v("收件地址")]),i("ul",[e._l(e.addressList,(function(t,s){return i("li",{key:s,staticClass:"recordedAddress",class:{checked:e.checkedIndex==s},on:{click:function(t){e.checkedIndex=s}}},[i("div",{staticClass:"name"},[e._v(e._s(t.receiverName))]),i("div",{staticClass:"mobile"},[e._v(e._s(t.receiverMobile))]),i("div",{staticClass:"address-detail"},[i("span",{staticClass:"province"},[e._v(e._s(t.receiverProvince))]),i("span",{staticClass:"city"},[e._v(e._s(t.receiverCity))]),i("span",{staticClass:"district"},[e._v(e._s(t.receiverDistrict))]),i("span",{staticClass:"detail"},[e._v(e._s(t.receiverAddress))])]),i("div",{staticClass:"post"},[e._v(e._s(t.receiverZip))]),i("div",{staticClass:"clearfix action"},[i("a",{staticClass:"fl",attrs:{href:"javascript:;"},on:{click:function(i){return e.delAddress(t)}}},[i("svg",{staticClass:"icon icon-delete"},[i("use",{attrs:{"xlink:href":"#icon-del"}})])]),i("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(i){e.editAddress(t)}}},[i("svg",{staticClass:"icon icon-edit"},[i("use",{attrs:{"xlink:href":"#icon-edit"}})])])])])})),i("li",{staticClass:"addNewAddress"},[i("a",{staticClass:"icon-add",attrs:{href:"javascript:;"},on:{click:e.addAddresss}}),i("div",{staticClass:"text"},[e._v("添加新地址")])])],2)]),i("div",{staticClass:"product"},[i("div",{staticClass:"title"},[e._v("商品")]),i("div",{staticClass:"product-detail"},[i("ul",e._l(e.cartList,(function(t,s){return i("li",{key:s,staticClass:"product-item"},[i("div",{staticClass:"product-name"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.productMainImage,expression:"item.productMainImage"}]}),i("span",[e._v(e._s(t.productName+" "+t.productSubtitle))])]),i("div",{staticClass:"product-price"},[e._v(e._s(t.productPrice)+" 元 × "+e._s(t.quantity))]),i("div",{staticClass:"product-total"},[e._v(e._s(t.productTotalPrice)+" 元")])])})),0)])]),e._m(0),i("div",{staticClass:"order-detail"},[i("div",[i("span",{staticClass:"title"},[e._v("商品件数")]),i("span",[e._v(e._s(e.productCount)+"件")])]),i("div",[i("span",{staticClass:"title"},[e._v("商品总价")]),i("span",[e._v(e._s(e.totalPrice)+" 元")])]),e._m(1),e._m(2),i("div",{staticClass:"money"},[i("span",{staticClass:"title"},[e._v("应付金额")]),i("span",[e._v(e._s(e.totalPrice)+" 元")])])]),i("div",{staticClass:"goToOrder"},[i("a",{staticClass:"btn-large",attrs:{href:"/#/cart"}},[e._v("返回购物车")]),i("a",{staticClass:"btn-large",attrs:{href:"javascript:;"},on:{click:e.submitOrder}},[e._v("去结算")])]),i("modal",{attrs:{title:"删除地址",btnType:"3",showModal:e.showDelModal},on:{cancel:function(t){e.showDelModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("P",[e._v("你确定要删除此地址吗？")])]},proxy:!0}])}),i("modal",{attrs:{title:"添加地址",btnType:"3",confirmText:"保存",showModal:e.showAddModal},on:{cancel:function(t){e.showAddModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("div",{staticClass:"edit-wrap"},[i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverName,expression:"checkedItem.receiverName"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.checkedItem.receiverName},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverName",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],attrs:{type:"text",placeholder:"手机号码"},domProps:{value:e.checkedItem.receiverMobile},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverMobile",t.target.value)}}})]),i("div",{staticClass:"item"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverProvince",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"上海"}},[e._v("上海")]),i("option",{attrs:{value:"湖北"}},[e._v("湖北")]),i("option",{attrs:{value:"广东"}},[e._v("广东")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverCity",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"上海"}},[e._v("上海")]),i("option",{attrs:{value:"武汉"}},[e._v("武汉")]),i("option",{attrs:{value:"深圳"}},[e._v("深圳")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"distric",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverDistrict",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"昌平区"}},[e._v("昌平区")]),i("option",{attrs:{value:"海淀区"}},[e._v("海淀区")]),i("option",{attrs:{value:"朝阳区"}},[e._v("朝阳区")]),i("option",{attrs:{value:"东城区"}},[e._v("东城区")]),i("option",{attrs:{value:"西城区"}},[e._v("西城区")])])]),i("div",{staticClass:"item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"stree",id:""},domProps:{value:e.checkedItem.receiverAddress},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverAddress",t.target.value)}}})]),i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],attrs:{type:"text",placeholder:"邮编"},domProps:{value:e.checkedItem.receiverZip},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverZip",t.target.value)}}})])])]},proxy:!0}])}),i("modal",{attrs:{title:"编辑地址",btnType:"3",confirmText:"保存",showModal:e.showEditModal},on:{cancel:function(t){e.showEditModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("div",{staticClass:"edit-wrap"},[i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverName,expression:"checkedItem.receiverName"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.checkedItem.receiverName},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverName",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],attrs:{type:"text",placeholder:"手机号码"},domProps:{value:e.checkedItem.receiverMobile},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverMobile",t.target.value)}}})]),i("div",{staticClass:"item"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverProvince",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"上海"}},[e._v("上海")]),i("option",{attrs:{value:"湖北"}},[e._v("湖北")]),i("option",{attrs:{value:"广东"}},[e._v("广东")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverCity",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[e._v("北京")]),i("option",{attrs:{value:"上海"}},[e._v("上海")]),i("option",{attrs:{value:"武汉"}},[e._v("武汉")]),i("option",{attrs:{value:"深圳"}},[e._v("深圳")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"distric",id:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverDistrict",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"昌平区"}},[e._v("昌平区")]),i("option",{attrs:{value:"海淀区"}},[e._v("海淀区")]),i("option",{attrs:{value:"朝阳区"}},[e._v("朝阳区")]),i("option",{attrs:{value:"东城区"}},[e._v("东城区")]),i("option",{attrs:{value:"西城区"}},[e._v("西城区")])])]),i("div",{staticClass:"item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"stree",id:""},domProps:{value:e.checkedItem.receiverAddress},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverAddress",t.target.value)}}})]),i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],attrs:{type:"text",placeholder:"邮编"},domProps:{value:e.checkedItem.receiverZip},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverZip",t.target.value)}}})])])]},proxy:!0}])})],1)],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"deliver"},[i("div",{staticClass:"deliver-type"},[i("span",{staticClass:"title"},[e._v("配送方式")]),i("span",[e._v("包邮")])]),i("div",{staticClass:"receipt"},[i("span",{staticClass:"title"},[e._v("发票")]),i("span",[e._v("电子发票")]),i("span",[e._v("个人")]),i("span",[e._v("商品明细")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("span",{staticClass:"title"},[e._v("优惠活动")]),i("span",[e._v("0元")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("span",{staticClass:"title"},[e._v("运费")]),i("span",[e._v("0元")])])}],a=(i("4de4"),i("d81d"),i("c3d4")),c=i("aff5"),o={name:"order-confirm",components:{OrderHeader:a["a"],modal:c["a"]},data:function(){return{addressList:[],cartList:[],totalPrice:0,productCount:0,checkedItem:{},showAddModal:!1,showDelModal:!1,showEditModal:!1,operateType:"",checkedIndex:0}},mounted:function(){this.getAddress(),this.getCart()},methods:{getAddress:function(){var e=this;this.axios.get("/shippings").then((function(t){e.addressList=t.list}))},getCart:function(){var e=this;this.axios.get("/carts").then((function(t){e.cartList=t.cartProductVoList.filter((function(e){return e.productSelected})),e.totalPrice=t.cartTotalPrice,e.cartList.map((function(t){e.productCount+=t.quantity}))}))},addAddresss:function(){this.checkedItem={},this.showAddModal=!0,this.operateType=0},delAddress:function(e){this.checkedItem=e,this.showDelModal=!0,this.operateType=1},editAddress:function(e){this.checkedItem=e,this.showEditModal=!0,this.operateType=2},submitAddress:function(){var e,t,i=this,s={};switch(this.operateType){case 0:e="post",t="/shippings";break;case 1:e="delete",t="/shippings/".concat(this.checkedItem.id);break;case 2:e="put",t="/shippings/".concat(this.checkedItem.id);break}if(0==this.operateType||2==this.operateType){var r=this.checkedItem,a=r.receiverName,c=r.receiverMobile,o=r.receiverProvince,n=r.receiverCity,d=r.receiverDistrict,l=r.receiverAddress,v=r.receiverZip,u="";if(a?c&&/\d{11}/.test(c)?o&&n&&d&&l?v&&/\d{6}/.test(v)||(u="请输入六位邮编"):u="请输入完整的收货地址":u="请输入11位手机号码":u="请输入收件人名称",u)return void this.$message.error(u);s={receiverName:a,receiverMobile:c,receiverProvince:o,receiverCity:n,receiverDistrict:d,receiverAddress:l,receiverZip:v}}this.axios[e](t,s).then((function(){i.closeModal(),i.getAddress(),i.$message.success("操作成功")}))},closeModal:function(){this.showDelModal=!1,this.showEditModal=!1,this.showAddModal=!1,this.useAction="",this.checkedItem={}},submitOrder:function(){var e=this,t=this.addressList[this.checkedIndex];t?this.axios.post("/orders",{shippingId:t.id}).then((function(t){e.$router.push({path:"/order/pay",query:{orderNo:t.orderNo}})})):this.$message.error("请选择收货地址")}}},n=o,d=(i("1255"),i("2877")),l=Object(d["a"])(n,s,r,!1,null,null,null);t["default"]=l.exports},"4de4":function(e,t,i){"use strict";var s=i("23e7"),r=i("b727").filter,a=i("d039"),c=i("1dde"),o=c("filter"),n=o&&!a((function(){[].filter.call({length:-1,0:1},(function(e){throw e}))}));s({target:"Array",proto:!0,forced:!o||!n},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(e,t,i){var s=i("861d"),r=i("e8b5"),a=i("b622"),c=a("species");e.exports=function(e,t){var i;return r(e)&&(i=e.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?s(i)&&(i=i[c],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},"6b4a":function(e,t,i){"use strict";var s=i("1e8a"),r=i.n(s);r.a},7634:function(e,t,i){},b727:function(e,t,i){var s=i("f8c2"),r=i("44ad"),a=i("7b0b"),c=i("50c4"),o=i("65f0"),n=[].push,d=function(e){var t=1==e,i=2==e,d=3==e,l=4==e,v=6==e,u=5==e||v;return function(p,m,h,f){for(var _,k,g=a(p),C=r(g),y=s(m,h,3),I=c(C.length),w=0,x=f||o,b=t?x(p,I):i?x(p,0):void 0;I>w;w++)if((u||w in C)&&(_=C[w],k=y(_,w,g),e))if(t)b[w]=k;else if(k)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:n.call(b,_)}else if(l)return!1;return v?-1:d||l?l:b}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},c3d4:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order-header"},[i("div",{staticClass:"container clearfix"},[e._m(0),i("div",{staticClass:"title fl"},[e._v(" "+e._s(e.title)+" "),e._t("tip")],2),i("div",{staticClass:"username fr"},[e._v(e._s(e.username))])])])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-logo fl"},[i("a",{attrs:{href:"/#/index"}})])}],a={name:"order-header",props:{title:String},computed:{username:function(){return this.$store.state.username}}},c=a,o=(i("6b4a"),i("2877")),n=Object(o["a"])(c,s,r,!1,null,null,null);t["a"]=n.exports},d81d:function(e,t,i){"use strict";var s=i("23e7"),r=i("b727").map,a=i("d039"),c=i("1dde"),o=c("map"),n=o&&!a((function(){[].map.call({length:-1,0:1},(function(e){throw e}))}));s({target:"Array",proto:!0,forced:!o||!n},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);